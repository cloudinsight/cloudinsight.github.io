<!doctype html>
<html>
  <head>
    <meta name="keywords" content="ç½‘ç«™ç›‘æ§,æœåŠ¡å™¨ç›‘æ§,æ•°æ®åº“ç›‘æ§,è‡ªå®šä¹‰æŒ‡æ ‡,æœåŠ¡ç›‘æ§,ä¸­é—´ä»¶ç›‘æ§,æ•°æ®å¯è§†åŒ–,å¤§æ•°æ®ç›‘æ§,é¡µé¢æ€§èƒ½ç›‘æ§">
<meta name="description" content="Cloud Insight æ˜¯ä¸€æ¬¾é›†ç›‘æ§ä¸æ•°æ®å¯è§†åŒ–ï¼Œæ•°æ®ç®¡ç†ä¸ºä¸€èº«çš„å¹³å°ï¼Œå¯ä»¥è¿›è¡ŒåŸºç¡€ç»„ä»¶çš„ç›‘æ§ï¼Œè‡ªå®šä¹‰æ•°æ®ä»ªè¡¨ç›˜çš„å±•ç¤ºï¼Œå¯¹ä»»æ„æŒ‡æ ‡æŠ¥è­¦ï¼Œæ˜¯ITè¿ç»´äººå‘˜ï¼Œä»¥åŠå¼€å‘äººå‘˜çš„å¿…å¤‡å·¥å…·æœåŠ¡">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">

<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
<link rel="icon" href="/images/favicon.ico" type="image/x-icon">
<!-- Use title if it's in the page YAML frontmatter -->
<title>Cloud Insight æ–‡æ¡£</title>

  <script type="text/javascript">
    if (window.location.hostname === 'www.oneapm.com') {
      var pathnameSegs = window.location.pathname.split("/docs/ci");
      var realPathname = pathnameSegs[pathnameSegs.length - 1];
      window.location.href = 'http://docs-ci.oneapm.com' + realPathname;
    } else if (window.location.hostname !== 'docs-ci.oneapm.com') {
      window.location.href = 'http://docs-ci.oneapm.com' + window.location.pathname;
    }
  </script>

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?dc7d70374ed3b2f6ce76527be8b9c93a";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

<!-- growingio -->
<script type='text/javascript'>
  var _vds = _vds || [];
  window._vds = _vds;
  (function(){
    _vds.push(['setAccountId', '9b345c730c9983fa']);
    (function() {
      var vds = document.createElement('script');
      vds.type='text/javascript';
      vds.async = true;
      vds.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'dn-growing.qbox.me/vds.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(vds, s);
    })();
  })();
</script>


<link href="/stylesheets/site.css" rel="stylesheet" />
<script src="/javascripts/jquery-2.2.1.js"></script>
<script src="/javascripts/bootstrap.min.js"></script>
<script src="/javascripts/all.js"></script>
<style media="screen">
  .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight {
  color: #faf6e4;
  background-color: #122b3b;
}
.highlight .gl {
  color: #dee5e7;
  background-color: #4e5d62;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #6c8b9f;
  font-style: italic;
}
.highlight .cp {
  color: #b2fd6d;
  font-weight: bold;
  font-style: italic;
}
.highlight .err {
  color: #fefeec;
  background-color: #cc0000;
}
.highlight .gr {
  color: #fefeec;
  background-color: #cc0000;
}
.highlight .k, .highlight .kd, .highlight .kv {
  color: #f6dd62;
  font-weight: bold;
}
.highlight .o, .highlight .ow {
  color: #4df4ff;
}
.highlight .p, .highlight .pi {
  color: #4df4ff;
}
.highlight .gd {
  color: #cc0000;
}
.highlight .gi {
  color: #b2fd6d;
}
.highlight .ge {
  font-style: italic;
}
.highlight .gs {
  font-weight: bold;
}
.highlight .gt {
  color: #dee5e7;
  background-color: #4e5d62;
}
.highlight .kc {
  color: #f696db;
  font-weight: bold;
}
.highlight .kn {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kp {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kr {
  color: #ffb000;
  font-weight: bold;
}
.highlight .gh {
  color: #ffb000;
  font-weight: bold;
}
.highlight .gu {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kt {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .no {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nc {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nd {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nn {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .bp {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .ne {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nl {
  color: #ffb000;
  font-weight: bold;
}
.highlight .nt {
  color: #ffb000;
  font-weight: bold;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #f696db;
  font-weight: bold;
}
.highlight .ld {
  color: #f696db;
  font-weight: bold;
}
.highlight .ss {
  color: #f696db;
  font-weight: bold;
}
.highlight .s, .highlight .sb, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .sr, .highlight .s1 {
  color: #fff0a6;
  font-weight: bold;
}
.highlight .se {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .sc {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .si {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .nb {
  font-weight: bold;
}
.highlight .ni {
  color: #999999;
  font-weight: bold;
}
.highlight .w {
  color: #BBBBBB;
}
.highlight .nf {
  color: #a8e1fe;
}
.highlight .py {
  color: #a8e1fe;
}
.highlight .na {
  color: #a8e1fe;
}
.highlight .nv, .highlight .vc, .highlight .vg, .highlight .vi {
  color: #a8e1fe;
  font-weight: bold;
}
</style>

  </head>

  <body class="page-qa qa_down_summary">
      <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-74438127-1', 'auto');
    ga('send', 'pageview');

  </script>

<div class="ribbon right orange hidden-sm hidden-xs">
  <a href="https://github.com/cloudinsight" target="_blank" title="Fork me on GitHub">Fork me on GitHub</a>
</div>

<nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">Cloud Insight æ–‡æ¡£</a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown guide">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
            ä½¿ç”¨æŒ‡å— <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            <li><a href="/quick-start/">å¿«é€Ÿå…¥é—¨</a></li>
            <li><a href="/quick-start/videos.html">è§†é¢‘æ¼”ç¤º</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/release-note.html">è¯¦ç»†æ–‡æ¡£</a></li>
            <li><a href="/platform/index.html">Agent å®‰è£…ä¸é…ç½®</a></li>
            <li><a href="/services/index.html">å¹³å°æœåŠ¡</a></li>
            <li><a href="/dashboard/index.html">ä»ªè¡¨ç›˜</a></li>
            <li><a href="/metric/index.html">æŒ‡æ ‡ä¸ç¤ºæ„</a></li>
            <li><a href="/alert/index.html">å‘Šè­¦ä¸ç­–ç•¥</a></li>
            <li><a href="/event/index.html">äº‹ä»¶</a></li>
            <li><a href="/services_example/index.html">å¹³å°æœåŠ¡é…ç½®ç¤ºä¾‹</a></li>
          </ul>
        </li>
        <li class="dropdown cloud-integration">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
            äº‘å‚å•†é›†æˆ <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            <li><a href="/cloud-integration/">é›†æˆç®€ä»‹</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/cloud-integration/aliyun.html">é˜¿é‡Œäº‘</a></li>
            <li><a href="/cloud-integration/ucloud.html">UCloud</a></li>
          </ul>
        </li>
        <li><a href="/api/">API ä¸ SDK</a></li>
        <li><a href="/qa/">å¸¸è§é—®é¢˜</a></li>
        <li><a href="/best-practise/">æœ€ä½³å®è·µ</a></li>
        <li><a href="/use-case/">å®¢æˆ·æ¡ˆä¾‹</a></li>
      </ul>
      <div class="navbar-form navbar-right">
        <a href="http://user.oneapm.com/pages/v2/login?ref=https://cloud.oneapm.com&from=ci-docs" class="btn btn-default" target="_blank">ç™» å½•</a>
        <a href="https://user.oneapm.com/pages/v2/signup?ref=https://cloud.oneapm.com&from=ci-docs" class="btn btn-default" target="_blank">æ³¨ å†Œ</a>
      </div>
    </div>
  </div>
</nav>

    <div class="container page-container">
      <div class="row">
        <div class="col-lg-3 page-sidebar hidden-sm hidden-xs">
          <ul>
<li><p><a href="#"><strong>äº§å“</strong></a></p>

<ul>
<li><a href="/qa/down_summary.html">åº”ç”¨å®‰è£…å¤±è´¥å…¨è§£æ</a></li>
<li><a href="/qa/metrics.html">æŒ‡æ ‡å«ä¹‰çœ‹ä¸æ‡‚ï¼Ÿ</a></li>
<li><a href="/qa/load.html">load.1 ,5 , 15  æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</a></li>
<li><a href="/qa/agent.html">Cloud Insight æ¢é’ˆæ˜¯æ€æ ·å·¥ä½œçš„ï¼Ÿ</a></li>
<li><a href="/qa/name.html">æ€ä¹ˆä¿®æ”¹åº”ç”¨åç§°ï¼Ÿ</a></li>
<li><a href="/qa/host_unavailable.html">å¦‚ä½•åœ¨ä¸»æœºä¸å¯ç”¨æ—¶æ”¶åˆ°æŠ¥è­¦ï¼Ÿ</a></li>
<li><a href="/qa/windows_v.html">Cloud Insight æ”¯æŒå“ªäº› Windows ç‰ˆæœ¬ï¼Ÿ</a></li>
<li><a href="/qa/tag.html">tag ä½¿ç”¨æŒ‡å—</a></li>
<li><a href="/qa/network_adapter.html">æ€ä¹ˆè¯†åˆ«å¤šç½‘å¡æµé‡æƒ…å†µï¼Ÿ</a></li>
<li><a href="/qa/browser.html">æµè§ˆå™¨ä¸èƒ½æ˜¾ç¤º Cloud Insight æ•°æ®</a></li>
<li><a href="/qa/more.html">å¦‚ä½•ç›‘æ§å¤šä¸ªå¹³å°æœåŠ¡</a></li>
<li><a href="/qa/core.html">å¦‚ä½•ç›‘æ§å¤šæ ¸ CPU</a></li>
<li><a href="/qa/process.html">æ€ä¹ˆç›‘æ§è¿›ç¨‹ï¼ŒæŒ‚æ‰çš„æ—¶å€™å¯ä»¥æ”¶åˆ°æŠ¥è­¦ï¼Ÿ</a></li>
<li><a href="/qa/metric.html">æ€ä¹ˆæ‰¹é‡åˆ›å»ºä¸åŒä¸»æœºï¼Œç›¸åŒæŒ‡æ ‡çš„å›¾è¡¨ï¼Ÿ</a></li>
</ul></li>
<li><p><a href="/qa/agent_index.html"><strong>Agent ä½¿ç”¨</strong></a></p>

<ul>
<li><a href="/qa/agent_update.html">æ€ä¹ˆæ›´æ–°æ¢é’ˆ</a></li>
<li><a href="/qa/agent_uninstall.html">æ¢é’ˆå¸è½½æ“ä½œ</a></li>
<li><a href="/qa/http_emitter.html">http_emitter: TypeError(/expected string)</a></li>
<li><a href="/qa/emitter.html">emitter.py æŠ¥é”™ Unable to post payload</a></li>
<li><a href="/qa/address_already_in_use.html">ç«¯å£è¢«å ç”¨ï¼šErrno 98 Address already in use</a></li>
<li><a href="/qa/hostname.html">Unable to reliably determine host name</a></li>
<li><a href="/qa/kill_automatic.html">Ci æ¢é’ˆå¯åŠ¨æˆåŠŸä¸ä¹…å°±è‡ªåŠ¨å…³é—­</a></li>
<li><a href="/qa/centos-7.html">è§£å†³ CentOS 7 å®‰è£… Cloud Insight æŠ¥é”™é—®é¢˜</a></li>
<li><a href="/qa/ubuntu-error.html">nmet dependencies Ubuntu å®‰è£…æŠ¥é”™</a></li>
<li><a href="/qa/centos-5.html">è§£å†³ CentOS 5 å®‰è£… Cloud Insight æŠ¥é”™é—®é¢˜</a></li>
<li><a href="/qa/remove-agent.html">å¸è½½äº†æ¢é’ˆï¼Œå®˜ç½‘ä¸Šæ€ä¹ˆè¿˜æ˜¯æœ‰ä¸»æœºæ•°æ®ï¼Œå¤šé•¿æ—¶é—´å°±æ²¡æœ‰äº†</a></li>
<li><a href="/qa/syslog.html">Error setting up syslog</a></li>
<li><a href="/qa/time.html">æ¢é’ˆå¯åŠ¨æˆåŠŸï¼Œæ²¡æœ‰ä»»ä½•æŠ¥é”™ï¼Œä½†æ•°æ®åŠ è½½å´æ˜¾ç¤º &ldquo;æš‚æ— æ•°æ®&rdquo;</a></li>
<li><a href="/qa/win_2008.html">Windows 2008 R2 å®‰è£…å¤±è´¥</a></li>
<li><a href="/qa/win_install.html">Windows å®‰è£…æ¢é’ˆå¤±è´¥æ— æŠ¥é”™</a></li>
</ul></li>
<li><p><a href="/qa/service_index.html"><strong>å¹³å°æœåŠ¡é…ç½®</strong></a></p>

<ul>
<li><a href="/qa/yaml.html">YAML æ ¼å¼é¡»çŸ¥</a></li>
<li><a href="/qa/snmp.html">SNMP å¦‚ä½•é…ç½®ç›‘æ§</a></li>
<li><a href="/qa/apache_404.html">Apache: é¡µé¢å‡ºç° 404 Client Error</a></li>
<li><a href="/qa/tomcat_cannot_connect_to_instance_localhost.html">Tomcat: Cannot Connect to Instance Localhost</a></li>
<li><a href="/qa/yaml_loading.html">é…ç½® yaml æ–‡ä»¶å‡ºé”™ï¼šæ•°æ®æŒç»­åŠ è½½ä¸­</a></li>
<li><a href="/qa/mysql-error.html">MySQL å¼‚å¸¸æŠ¥é”™</a></li>
<li><a href="/qa/java_path.html">Cloudnâ€™t launch JMXTerm . Is Java in your PATH ?</a></li>
<li><a href="/qa/mysql_m_s.html">MySQL ä¸»ä»å¤åˆ¶</a></li>
<li><a href="/qa/docker_daemon.html">Docker &ndash; Unable to connect to socket. oneapm-ci-agent user must be part of the &lsquo;docker&rsquo; group</a></li>
<li><a href="/qa/process_error.html">è¿›ç¨‹é…ç½®å®Œæˆåæ²¡æœ‰ç›‘æ§åˆ°ç›¸åº”æ•°æ®</a></li>
<li><a href="/qa/yaml_mapping.html">mapping values are not allowed in this context\n in &ldquo;byte string&rdquo;, line 5 ,column11</a></li>
<li><a href="/qa/nginx_ssl.html">Nginx SSLï¼šCERTIFICATE<em>VERIFY</em>FAILED certificate verify failed (_ssl.c:590)</a></li>
</ul></li>
</ul>

        </div>
        <div class="col-lg-9 page-body">
          <h1>åº”ç”¨å¯åŠ¨å¤±è´¥åŸå› æ’æŸ¥</h1>

<p>æ¢é’ˆå¯åŠ¨å¤±è´¥æœ‰2ç§æƒ…å†µï¼Œä¸€æ˜¯æ¢é’ˆæ²¡æœ‰å®‰è£…æˆåŠŸï¼ŒäºŒæ˜¯æ¢é’ˆå®‰è£…æˆåŠŸä½†æ²¡æœ‰å¯åŠ¨æˆåŠŸã€‚æ¢é’ˆæœ‰æ²¡æœ‰å®‰è£…æˆåŠŸï¼Œä½ å¯ä»¥çœ‹æ˜¯å¦æœ‰å¯ä»¥æ‰§è¡Œ <code>/etc/init.d/oneapm-ci-agent info</code>ï¼Œå¦‚æœä¸èƒ½æ‰§è¡Œï¼Œé‚£å°±æ˜¯æ²¡æœ‰å®‰è£…æˆåŠŸï¼›å¦‚æœå¯ä»¥æ‰§è¡Œå°±çœ‹çœ‹è¾“å‡ºæœ‰ä»€ä¹ˆæŠ¥é”™ï¼Œå†è¿›è¡Œä¸‹ä¸€æ­¥åˆ†æã€‚ </p>

<p>ä¸‹é¢å°†å¯¹å„ç§å¯èƒ½é€ æˆçš„åŸå› ç»™å‡ºç›¸åº”è§£å†³æ–¹æ³•ã€‚</p>

<h2>æ¢é’ˆæ²¡æœ‰å®‰è£…æˆåŠŸ</h2>

<p>æ¢é’ˆåœ¨å®‰è£…çš„æ—¶å€™ä¼šäº§ç”Ÿå®‰è£…çš„ logï¼Œæ‰€ä»¥è¦çœ‹æŠ¥é”™ç¡®å®šé—®é¢˜ã€‚</p>

<h3>curl é—®é¢˜</h3>
<pre class="highlight plaintext"><code>curl: (35) error:0D0C50A1:asn1 encoding routines:ASN1_item_verify:unknown message digest algorithm
</code></pre>

<p>è¿™ä¸ªé—®é¢˜å¤šç”±è¯ä¹¦æœ¬åœ° openssl ä¸èƒ½è¯†åˆ« SSL è¯ä¹¦ç­¾åç®—æ³•æ‰€è‡´ã€‚Cloud Insight ä½¿ç”¨äº† SHA-256 RSA åŠ å¯†ç®—æ³•ã€‚è€Œ openssl åœ¨ OpenSSL 0.9.8oæ‰åŠ å…¥æ­¤ç®—æ³•ã€‚</p>

<p><strong>è§£å†³åŠæ³•</strong>æ˜¯å‡çº§æœ¬åœ° opensslã€‚</p>

<h3>é•œåƒæ— æ•ˆ</h3>
<pre class="highlight plaintext"><code>Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
http://yum.oneapm.com/x86_64/repodata/ae9772f136d882fd8f61b9c71e29c2630db3d5b211ef4ddc2b976af3006ebe1a-primary.sqlite.bz2: [Errno -3] Error performing checksum
Trying other mirror.
http://yum.oneapm.com/x86_64/repodata/ae9772f136d882fd8f61b9c71e29c2630db3d5b211ef4ddc2b976af3006ebe1a-primary.sqlite.bz2: [Errno -3] Error performing checksum
Trying other mirror.
Error: failure: repodata/ae9772f136d882fd8f61b9c71e29c2630db3d5b211ef4ddc2b976af3006ebe1a-primary.sqlite.bz2 from oneapm-ci-agent: [Errno 256] No more mirrors to try.
[31m

</code></pre>

<p>è¿™æ˜¯ Centos 5 ç‰ˆæœ¬å¯èƒ½äº§ç”Ÿçš„é—®é¢˜ï¼Œä»¥ä¸Šå‡ºé”™åŸå› æ˜¯å‘å¸ƒ Cloud Insight æ¢é’ˆåŒ…æ—¶é»˜è®¤çš„ checksumï¼ˆæ£€éªŒç ï¼‰æ˜¯ sha256 ,è€Œ CentOS 5/rhel 5 ç‰ˆæœ¬ä¸ç¬¦åˆè¿™ä¸ªï¼Œæ‰€ä»¥å®‰è£…ä¸äº†è¿™ä¸ªå®‰è£…åŒ…ã€‚</p>

<p><strong>è§£å†³æ–¹æ³•</strong> ï¼šé¦–å…ˆåˆ æ‰å› å®‰è£… Ci æ·»åŠ çš„ yum æº<code>
rm -rf  /etc/yum.repos.d/oneapm-ci-agent.repo</code>ï¼Œç„¶åå®‰è£…ä¸€ä¸ª hash åŠ å¯†çš„æ¨¡å—ï¼š<code>
yum install python-hashlib</code>ï¼Œç„¶åé‡æ–°å®‰è£…æ¢é’ˆï¼Œå‚è€ƒ<a href="/qa/centos-5.html">è§£å†³ CentOS 5 å®‰è£… Cloud Insight æŠ¥é”™é—®é¢˜</a>ã€‚</p>

<h3>ç”¨æˆ·å¯†ç æƒé™é—®é¢˜</h3>
<pre class="highlight plaintext"><code>useradd: cannot  open  /etc/passwd
</code></pre>

<p>è¿™æ˜¯ Centos 7 ç‰ˆæœ¬å¯èƒ½äº§ç”Ÿçš„é—®é¢˜ï¼Œå…·ä½“å‚è€ƒ<a href="/qa/centos-7.html">è§£å†³ CentOS 7 å®‰è£… Cloud Insight æŠ¥é”™é—®é¢˜</a>ã€‚</p>

<h3>unmet dependencies</h3>
<pre class="highlight plaintext"><code>* Installing APT package sources for OneAPM

Executing: gpg --ignore-time-conflict --no-options --no-default-keyring --secret-keyring /tmp/tmp.0dkKOJrsNY --trustdb-name /etc/apt/trustdb.gpg --keyring /etc/apt/trusted.gpg --primary-keyring /etc/apt/trusted.gpg --recv-keys --keyserver hkp://keyserver.ubuntu.com:80 54B043BC
gpg: requesting key 54B043BC from hkp server keyserver.ubuntu.com
gpg: key 54B043BC: "OneAPM Packages &lt;package@oneapm.com&gt;" not changed
gpg: Total number processed: 1
gpg:              unchanged: 1

* Installing the OneAPM CI Agent package

Ign http://apt.oneapm.com stable InRelease
Hit http://apt.oneapm.com stable Release.gpg
Hit http://apt.oneapm.com stable Release
Hit http://apt.oneapm.com stable/main amd64 Packages
Hit http://apt.oneapm.com stable/main i386 Packages
Ign http://apt.oneapm.com stable/main TranslationIndex
Ign http://apt.oneapm.com stable/main Translation-en_US
Ign http://apt.oneapm.com stable/main Translation-en
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
You might want to run 'apt-get -f install' to correct these:
The following packages have unmet dependencies:
 kunagi : Depends: tomcat6 but it is not going to be installed
          Recommends: msttcorefonts
          Recommends: ttf-dejavu but it is not going to be installed
E: Unmet dependencies. Try 'apt-get -f install' with no packages (or specify a solution).
ERROR
</code></pre>

<p>ä»¥ä¸ŠæŠ¥é”™è¯´æ˜ Ubuntu ç³»ç»Ÿå†… APT åŒ…æºæœ¬èº«å†²çªï¼Œå¦‚æœä¸å®‰è£…æ›´æ–°è½¯ä»¶çš„è¯è¿™ä¸ªé—®é¢˜ä¸ä¼šè¡¨ç°å‡ºæ¥ï¼Œä½†åœ¨å®‰è£… Cloud Insight æ¢é’ˆæ—¶ç¬¬ä¸€æ­¥æ‰§è¡Œçš„ sudo apt-get updateï¼Œæ­¤æ—¶ç³»ç»Ÿå†…å¦‚æœæœ‰æœåŠ¡éœ€è¦å‡çº§ç‰ˆæœ¬ï¼Œå°±ä¼šæŠ¥å‡ºé”™ã€‚å¦‚æœæ²¡åŠæ³•å¤„ç†å†²çªé—®é¢˜ï¼Œé‚£å°±åªèƒ½åˆ†å¸ƒå®‰è£…ã€‚å…·ä½“å®‰è£…æ–¹æ³•è§æœ¬æ–‡å°¾å¤„ã€‚</p>

<h2>æ¢é’ˆå®‰è£…æˆåŠŸæ²¡æœ‰å¯åŠ¨æˆåŠŸ</h2>

<p>å½“ä¸€é”®å®‰è£…ååº”ç”¨æ˜¾ç¤º downï¼Œæ²¡æœ‰æ•°æ®ï¼Œæ­¤æ—¶ä½ éœ€è¦å…ˆçœ‹çœ‹ log æ¥ç¡®å®šé—®é¢˜ï¼Œæœ‰çš„å·²ç»ä¼šç›´æ¥æç¤ºè¿è¡Œå“ªäº›å‘½ä»¤ï¼Œæ‰§è¡Œå¦‚ä¸‹ info å‘½ä»¤ã€‚</p>
<pre class="highlight plaintext"><code>/etc/init.d/oneapm-ci-agent info
</code></pre>

<h3>hostname æŠ¥é”™</h3>
<pre class="highlight plaintext"><code>2016-01-19 13:33:09,326 | CRITICAL | ci.collector | util(util.py:226) | Unable t                                                                   nt.conf or in your hosts file
Traceback (most recent call last):
  File "/opt/oneapm-ci-agent/agent/agent.py", line 335, in &lt;module&gt;
    sys.exit(main())
  File "/opt/oneapm-ci-agent/agent/agent.py", line 215, in main
    hostname = get_hostname(agentConfig)
  File "/opt/oneapm-ci-agent/agent/util.py", line 227, in get_hostname
    raise Exception('Unable to reliably determine host name. You can define one
Exception: Unable to reliably determine host name. You can define one in oneapm-
</code></pre>

<p>å®‰è£… Ci æ¢é’ˆåï¼Œé»˜è®¤ä¼šä»¥æœåŠ¡å™¨ç³»ç»Ÿçš„ hostname ä½œä¸ºåº”ç”¨åç§°ï¼Œé»˜è®¤çš„ localhostã€ localhost.localdomainã€ localhost6.localdomains ç­‰åç§°æ˜¯æ— æ•ˆçš„ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ hostnameï¼Œä¿è¯å…¶å”¯ä¸€æ€§ã€‚</p>

<p><strong>è§£å†³æ–¹æ³•</strong> ä¿®æ”¹ <code>/etc/oneapm-ci-agent/oneapm-ci-agent.conf</code> hostname: xxxx æŒ‡æ ‡ï¼ˆa-zA-Z1-9ï¼Œä¸”ä¸èƒ½æœ‰ä¸‹åˆ’çº¿ï¼‰ï¼Œæ­¤å¤„çš„ hostname åªæ˜¯ä½œä¸ºåº”ç”¨çš„åç§°è€Œå­˜åœ¨ï¼Œä¸æœåŠ¡å™¨æœ¬èº«çš„ hostnme æ²¡æœ‰å…³ç³»ï¼Œæ‰€ä»¥å¯ä»¥ä»»æ„è®¾ç½®ã€‚</p>

<h3>æ—¶é—´é—®é¢˜</h3>
<pre class="highlight plaintext"><code>Clocks
======

  NTP offset: 229140.0818 s
  System UTC time: 2016-04-22 10:23:32.445928
</code></pre>

<p>åƒä¸Šé¢è¿™ç§æ—¶ä½ éœ€è¦æŸ¥çœ‹ä½ çš„æœåŠ¡å™¨æ—¶é—´æ˜¯å¦æ˜¯åŒ—äº¬æ—¶é—´ï¼Œå› ä¸ºæ¢é’ˆé‡‡é›†æ•°æ®æ˜¯æŒ‰ç…§æ—¶é—´åºåˆ—é‡‡é›†çš„ï¼Œå‘é€åˆ°æˆ‘ä»¬äº‘ç«¯ï¼Œæ­¤æ—¶å­˜å‚¨æ–¹å¼ä¹Ÿæ˜¯å®‰è£…æ—¶é—´åºåˆ—ï¼Œå‘é€åˆ°å‰ç«¯å±•ç¤ºçš„æ—¶å€™ä¾æ—§ä¼šæŒ‰ç…§é‡‡é›†åˆ°æ—¶é—´åºåˆ—ï¼Œä½†é»˜è®¤å‰æ®µå±•ç¤ºçš„æ˜¯åŒ—äº¬æ—¶é—´æœ€è¿‘30åˆ†é’Ÿçš„æ•°æ®ï¼Œæ‰€ä»¥ä¼šæ˜¾ç¤ºæ²¡æœ‰æ•°æ®ã€‚</p>

<p><strong>è§£å†³æ–¹æ³•</strong> æœåŠ¡å™¨æ—¶é—´åŒæ­¥ä¸ºåŒ—äº¬æ—¶é—´</p>

<h3>Error setting up syslog</h3>
<pre class="highlight plaintext"><code>[root@S-C7 conf.d]# /etc/init.d/oneapm-ci-agent restart
Stopping OneAPM CI Agent (using killproc on supervisord): [ OK ] Error setting up syslog: '[Errno 13] Permission denied' Traceback (most recent call last): File "/opt/oneapm-ci-agent/agent/config.py", line 1004, in initialize_logging handler = SysLogHandler(address=sys_log_addr, facility=SysLogHandler.LOG_DAEMON) File "/opt/oneapm-ci-agent/embedded/lib/python2.7/logging/handlers.py", line 761, in __init__ self._connect_unixsocket(address) File "/opt/oneapm-ci-agent/embedded/lib/python2.7/logging/handlers.py", line 789, in _connect_unixsocket self.socket.connect(address) File "/opt/oneapm-ci-agent/embedded/lib/python2.7/socket.py", line 228, in meth return getattr(self._sock,name)(*args) error: [Errno 13] Permission denied
</code></pre>

<p><strong>è§£å†³æ–¹æ³•</strong> æ­¤ä¸º syslog æ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œä¿®æ”¹ /etc/oneapm-ci-agent/oneapm-ci-agent.conf é‡Œé¢ log<em>to</em>syslog è®¾ç½®ä¸º no ï¼Œé‡å¯æ¢é’ˆå³å¯ã€‚</p>

<p>Info å‘½ä»¤å¦‚æœçœ‹ç€æ²¡é—®é¢˜ï¼Œçœ‹çœ‹æ¢é’ˆçš„ logï¼Œåœ¨ <code>/var/log/oneapm-ci-agent</code> ä¸‹é¢æœ‰ collector.logï¼Œforwarder.logï¼Œjmxfetch.logï¼Œonestatsd.log å’Œ supervisor.log å‡ ä¸ªæ–‡ä»¶ã€‚å…¶ä¸­ collector.log è®°å½•æ¢é’ˆæ”¶é›†çŠ¶å†µçš„ log ï¼Œforwarder.log è®°å½•æ¢é’ˆå‘é€åˆ° Cloud Insight SaaS çš„ä¼ è¾“æƒ…å†µã€‚</p>

<h3>ç«¯å£è¢«å ç”¨</h3>
<pre class="highlight plaintext"><code>2016-04-26 10:49:03 CST | ERROR | ci.forwarder | forwarder(forwarder.py:479) | Socket error [Errno 98] Address already in use. Is another application listening on the same port ? Exiting
Traceback (most recent call last):
  File "/opt/oneapm-ci-agent/agent/forwarder.py", line 467, in run
    http_server.listen(self._port, address=self._agentConfig['bind_host'])
  File "/opt/oneapm-ci-agent/embeddedb/python2.7/site-packages/tornado/tcpserver.py", line 117, in listen
    sockets = bind_sockets(port, address=address)
  File "/opt/oneapm-ci-agent/embeddedb/python2.7/site-packages/tornado/netutil.py", line 104, in bind_sockets
    sock.bind(sockaddr)
  File "/opt/oneapm-ci-agent/embeddedb/python2.7/socket.py", line 228, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 98] Address already in use
</code></pre>

<p>Ci æ¢é’ˆé»˜è®¤é€šè¿‡ 10010 ç«¯å£ä¼ è¾“æ•°æ®è‡³ Cloud Insight æœåŠ¡å™¨ï¼Œå¦‚æœæ­¤ç«¯å£è¢«å…¶ä»–ç¨‹åºå ç”¨ï¼Œè¿æ¥å°±ä¼šå¤±è´¥ï¼ŒæŠ¥å‡ºä»¥ä¸Šé”™è¯¯ã€‚</p>

<p><strong>è§£å†³æ–¹æ³•</strong>æ‚¨å¯ä»¥æ£€æŸ¥å ç”¨è¯¥ç«¯å£çš„åº”ç”¨ç¨‹åºï¼Œå¦‚æœæ–¹ä¾¿ï¼Œå¯ä»¥ kill æ­¤è¿›ç¨‹æˆ–ä¿®æ”¹æ­¤è¿›ç¨‹çš„ç«¯å£ï¼›å¦‚æœä¸æ–¹ä¾¿ä¿®æ”¹ï¼Œåˆ™å¯ä»¥ä¿®æ”¹ /etc/oneapm-ci-agent/oneapm-ci-agent.conf è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹æ­¤ç«¯å£ã€‚</p>
<pre class="highlight plaintext"><code>listen_port: 17121ï¼ˆä»»æ„æœªä½¿ç”¨ç«¯å£ï¼‰
</code></pre>

<p>ä¿®æ”¹ä¹‹åé‡æ–°å¯åŠ¨æ¢é’ˆå³å¯ã€‚</p>

<h3>Unable to post payload</h3>
<pre class="highlight plaintext"><code>2015-12-25 11:40:54 CST | ERROR | ci.collector | checks.collector(emitter.py:69) | Unable to post payload.
Traceback (most recent call last):
  File "/opt/oneapm-ci-agent/agent/emitter.py", line 61, in http_emitter
    r = requests.post(url, data=zipped, timeout=5, headers=headers)
  File "/opt/oneapm-ci-agent/embedded/lib/python2.7/site-packages/requests/api.py", line 108, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "/opt/oneapm-ci-agent/embedded/lib/python2.7/site-packages/requests/api.py", line 50, in request
    response = session.request(method=method, url=url, **kwargs)
  File "/opt/oneapm-ci-agent/embedded/lib/python2.7/site-packages/requests/sessions.py", line 464, in request
    resp = self.send(prep, **send_kwargs)
  File "/opt/oneapm-ci-agent/embedded/lib/python2.7/site-packages/requests/sessions.py", line 576, in send
    r = adapter.send(request, **kwargs)
  File "/opt/oneapm-ci-agent/embedded/lib/python2.7/site-packages/requests/adapters.py", line 415, in send
    raise ConnectionError(err, request=request)
ConnectionError: ('Connection aborted.', error(97, 'Address family not supported by protocol'))
</code></pre>

<p>å¦‚æœæœ‰ä»¥ä¸Š Unable to post payload çš„é—®é¢˜ï¼Œä½†ä¸æ˜¯è¿æ¥è¶…æ—¶é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºæ¢é’ˆé»˜è®¤ä¼šè¯»å– localhost çš„æ•°æ®ï¼Œå¦‚æœæœ¬æœºæ²¡æœ‰æŠŠ localhost è§£ææˆ 127.0.0.1 ï¼Œå°±ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ï¼Œæ‰€ä»¥å¯ä»¥å¯¹æœ¬æœºè¿›è¡Œè§£æï¼Œä¹Ÿå¯ä»¥åœ¨ Cloud Insight é…ç½®æ–‡ä»¶é‡Œé¢ç»‘å®š 127.0.0.1ã€‚å¯ä»¥ä¿®æ”¹ <code>/etc/oneapm-ci-agent/oneapm-ci-agent.conf</code> æ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre class="highlight plaintext"><code>bind_host: 127.0.0.1
</code></pre>

<p>ä¹‹åé‡å¯æ¢é’ˆï¼Œåœ¨ web ä¸Šçœ‹çœ‹æ˜¯å¦å·²ç»æœ‰æ•°æ®ã€‚</p>

<p>å¦‚æœæœ‰ä»¥ä¸Š Unable to post payload çš„é—®é¢˜ï¼Œä½†æ˜¯è¿æ¥è¶…æ—¶é—®é¢˜ï¼Œå¯ä»¥å¿½ç•¥ï¼Œå¶å°”1ï½2æ¬¡æ•°æ®æ²¡æœ‰ä¼ è¾“ä¸Šå»ï¼Œä¸ä¼šæœ‰å½±å“ï¼ŒCloud Insight Agent æœ‰30M ç¼“å­˜ï¼Œæ•°æ®æ²¡æœ‰å‘é€æˆåŠŸä¸‹æ¬¡å‘é€æ—¶å›ä¸€å¹¶å‘è¿‡å»ï¼Œç›´è‡³å‘é€æˆåŠŸã€‚ </p>

<h3>license_key</h3>

<p>å¦‚æœ collector.log å’Œ forwarder.log éƒ½æ²¡æœ‰æŠ¥é”™ï¼Œä½ åº”è¯¥è€ƒè™‘æ˜¯ä¸æ˜¯ license<em>key å†™é”™äº†ï¼Œæˆ‘ä»¬æ­£ç¡®çš„ license</em>key æœ«å°¾éƒ½æ˜¯æœ‰ç­‰å·çš„ï¼Œä¾‹å¦‚ <code>B1oCTldEV6b2bAoVCEwID0918f35hQdXH1I9f9dBHApWFVQIcb79VVZfti4bUAU=</code> ï¼Œæ‰€ä»¥æŸ¥çœ‹è‡ªå·±çš„ license_key ï¼Œä¿®æ”¹æ­£ç¡®ï¼Œé‡å¯æ¢é’ˆå°±è¡Œå•¦ã€‚æ­£ç¡®æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre class="highlight plaintext"><code>me  18:49:46
# The host of the OneAPM data collector server to send Agent data to
ci_url: https://dc-cloud.oneapm.com

# The OneAPM license key to associate your Agent's data with your organization.
license_key: B1oCTldEV6b2bAoVCEwID0918f4FCQdXH1I9f9dBHApWFVQIcb79VVZPBw4bUAU=
</code></pre>

<h3>æ¢é’ˆå‘é€æ•°æ®é¢‘ç‡</h3>

<p>æ¢é’ˆ30s é‡‡é›†ä¸€æ¬¡æ•°æ®ï¼Œ15s ç§’å‘é€ä¸€æ¬¡æ•°æ®ï¼Œè¿™æ˜¯ä¸ºäº†ä¿è¯æ•°æ®å…¨éƒ¨å‘é€è¿‡å»ã€‚</p>

<p>æ¢é’ˆå¯¹äºçŠ¶æ€å€¼æ£€éªŒï¼ˆæ‰§è¡Œ info å‘½ä»¤æ‰€è¾“å‡ºçš„ç³»ç»Ÿä»¥åŠå„ä¸ªç›‘æ§ç»„ä»¶çš„æ˜¯éæ­£å¸¸å‘é€æ•°æ®çš„æ£€éªŒï¼Œæ­£å¸¸æ˜¯ç»¿è‰²ï¼Œé»„è‰²æ˜¯è­¦å‘Šï¼Œä¸å½±å“æ•°æ®ï¼Œçº¢è‰²æ˜¯å‘ç”Ÿé”™è¯¯ ï¼‰æ˜¯10åˆ†é’Ÿå‘é€ä¸€æ¬¡ï¼Œæ‰€ä»¥å¦‚æœç•Œé¢ä¸Šçš„çŠ¶æ€å’Œæ‰§è¡Œ info åè¾“å‡ºçš„æœ‰æ‰€ä¸ä¸€è‡´ï¼Œé‚£å†ç­‰å‡ åˆ†é’Ÿï¼Œä¸ºäº†é¿å…èµ„æºæŸè€—ï¼Œè¿™ä¸ªå‘é€é¢‘ç‡æ˜¯10åˆ†é’Ÿã€‚</p>

<p>åŒæ ·ç•Œé¢ä¸Šå¦‚æœè¿ç»­10åˆ†é’Ÿæ²¡æœ‰æ”¶åˆ°æ•°æ®ï¼Œåº”ç”¨çŠ¶æ€å°±ä¼šæ˜¾ç¤ºä¸º downï¼Œ3å¤©æ²¡æ•°æ®ï¼Œè¿™ä¸ªåº”ç”¨å°±ä¼šè‡ªåŠ¨åˆ é™¤ã€‚</p>

<h3>åˆ†æ­¥å®‰è£…</h3>

<p>å¦‚æœæ“ä½œç³»ç»Ÿæœ¬èº« YUM/APT æºæœ‰é—®é¢˜ï¼Œå¯ä»¥è¿›è¡Œåˆ†æ­¥å®‰è£…ï¼š</p>
<pre class="highlight plaintext"><code>sudo apt-get autoremove
sudo apt-get autoclean
wget http://apt.oneapm.com/pool/main/oneapm-ci-agent_x.x.0-1_amd64.deb  (å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹å½“å‰ç‰ˆæœ¬)
dpkg -i oneapm-ci-agent_x.x.0-1_amd64.deb
cd /etc/oneapm-ci-agent/
cp oneapm-ci-agent.conf.example   oneapm-ci-agent.conf  
vi oneapm-ci-agent.confï¼ˆ ä¿®æ”¹æˆè‡ªå·±çš„ license_key ï¼‰
/etc/init.d/oneapm-ci-agent restart 
</code></pre>
<pre class="highlight plaintext"><code>sudo yum update
wget http://yum.oneapm.com/x86_64/oneapm-ci-agent-x.x.0-1.x86_64.rpm
rpm -Uvh oneapm-ci-agent-x.x.0-1.x86_64.rpm
cd /etc/oneapm-ci-agent/
cp oneapm-ci-agent.conf.example   oneapm-ci-agent.conf  
vi oneapm-ci-agent.confï¼ˆ ä¿®æ”¹æˆè‡ªå·±çš„ license_key ï¼‰
/etc/init.d/oneapm-ci-agent restart 
</code></pre>

          <hr style="margin-top: 50px;" />
<div class="alert alert-warning" style="text-align:center; margin: 40px 0px;">
  <p style="font-size: 16px;">
    å¦‚æœæ‚¨å¯¹ Cloud Insight æ„Ÿå…´è¶£ï¼Œå¯ä»¥é€‰æ‹©è¯•ç”¨æˆ‘ä»¬çš„äº§å“ï¼Œåªéœ€è¦ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®å…è´¹æ³¨å†Œå³å¯ã€‚
  </p>
  <br />
  <p>
    <a href="https://user.oneapm.com/account/register.do?ref=https://cloud.oneapm.com&from=ci-docs" class="btn btn-info btn-lg" target="_blank">
      æ³¨å†Œï¼Œæ°¸ä¹…å…è´¹ä½¿ç”¨ Cloud Insight
    </a>
  </p>
</div>
<hr />
<!-- å¤šè¯´è¯„è®ºæ¡† start -->
<div class="ds-thread"
     id="ds-thread"
     data-thread-key=""
     data-title=""
     data-url="http://docs-ci.oneapm.com/qa/down_summary.html"></div>
<!-- å¤šè¯´è¯„è®ºæ¡† end -->
<!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
<script type="text/javascript">
  var titleTag = document.getElementsByTagName("h1")[0];

  if (titleTag) {
    title = document.getElementsByTagName("h1")[0].innerText;
  } else {
    title = "";
  }

  var duoshuoTag = document.getElementById('ds-thread');
  duoshuoTag.setAttribute('data-thread-key', title.replace(/\s/g, ''));
  duoshuoTag.setAttribute('data-title', title);

  var duoshuoQuery = {short_name:"docs-ci"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
</script>
<!-- å¤šè¯´å…¬å…±JSä»£ç  end -->

        </div>
      </div>
    </div>

    <script type="text/javascript">
      $(function() {
        $(".navbar-default .navbar-nav .guide").addClass("active");
      });
    </script>
  </body>
</html>
